<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pocket Lawyer - Email Configuration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 900px;
            overflow: hidden;
        }
        
        .header {
            background: #4e54c8;
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header h1 i {
            margin-right: 15px;
            font-size: 32px;
        }
        
        .content {
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .card h2 {
            color: #4e54c8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .card h2 i {
            margin-right: 10px;
        }
        
        .card p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .email-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .email-step {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .email-step:not(:last-child):after {
            content: "→";
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #4e54c8;
        }
        
        .email-icon {
            width: 70px;
            height: 70px;
            background: #4e54c8;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin: 0 auto 15px;
        }
        
        .email-desc {
            font-weight: 600;
            color: #333;
        }
        
        .email-address {
            color: #4e54c8;
            font-weight: 700;
            margin-top: 5px;
            display: block;
        }
        
        .config-section {
            background: #e8f4ff;
            border-left: 5px solid #4e54c8;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .config-section h3 {
            color: #4e54c8;
            margin-bottom: 15px;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .comment {
            color: #75715e;
        }
        
        .property {
            color: #a6e22e;
        }
        
        .value {
            color: #e6db74;
        }
        
        .btn {
            background: #4e54c8;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #3a3eb3;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f1f1f1;
            color: #555;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .email-flow {
                flex-direction: column;
                gap: 30px;
            }
            
            .email-step:not(:last-child):after {
                content: "↓";
                right: 50%;
                top: auto;
                bottom: -30px;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-scale-balanced"></i> Pocket Lawyer Email Configuration</h1>
            <p>Fix for password reset functionality</p>
        </div>
        
        <div class="content">
            <div class="card">
                <h2><i class="fas fa-question-circle"></i> The Problem</h2>
                <p>Your current implementation is trying to send password reset emails from your admin email to your admin email, which doesn't help users reset their passwords.</p>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-check-circle"></i> The Solution</h2>
                <p>You need to configure EmailJS to send emails <strong>from</strong> your pocketlawyerindia1950@gmail.com account <strong>to</strong> the user's email address.</p>
                
                <div class="email-flow">
                    <div class="email-step">
                        <div class="email-icon">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <div class="email-desc">Sender</div>
                        <span class="email-address">pocketlawyerindia1950@gmail.com</span>
                    </div>
                    
                    <div class="email-step">
                        <div class="email-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="email-desc">Email Service</div>
                        <span class="email-address">EmailJS</span>
                    </div>
                    
                    <div class="email-step">
                        <div class="email-icon">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="email-desc">Recipient</div>
                        <span class="email-address">User's Email</span>
                    </div>
                </div>
                
                <div class="config-section">
                    <h3><i class="fas fa-cog"></i> EmailJS Configuration</h3>
                    <p>Make sure your EmailJS template is configured correctly:</p>
                    
                    <div class="code-block">
                        <span class="comment">// In your EmailJS template, use:</span><br>
                        <span class="property">to_email</span>: <span class="value">{{user_email}}</span> <span class="comment">// User's email address</span><br>
                        <span class="property">from_name</span>: <span class="value">Pocket Lawyer</span><br>
                        <span class="property">message</span>: <span class="value">Reset link: {{reset_link}}</span><br>
                        <span class="property">reply_to</span>: <span class="value">pocketlawyerindia1950@gmail.com</span>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-code"></i> JavaScript Fix</h2>
                <p>Update your <code>handlePasswordReset</code> function to send the email to the user, not the admin:</p>
                
                <div class="code-block">
                    <span class="comment">// Current (incorrect) code:</span><br>
                    <span class="property">sendEmail</span>(<span class="value">adminEmail</span>, <span class="value">"Password Reset Request"</span>, <span class="value">resetMessage</span>);<br><br>
                    
                    <span class="comment">// Fixed code:</span><br>
                    <span class="property">sendEmail</span>(<span class="value">email</span>, <span class="value">"Password Reset Request"</span>, <span class="value">resetMessage</span>);<br>
                    <span class="comment">// Also send a notification to admin</span><br>
                    <span class="property">sendEmail</span>(<span class="value">adminEmail</span>, <span class="value">"Password Reset Requested"</span>, <span class="value">`User ${email} requested a password reset.`</span>);
                </div>
                
                <p>This way, the reset link goes to the user, and you get a notification about the reset request.</p>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-envelope"></i> Testing Your Setup</h2>
                <p>Before implementing, test your EmailJS configuration:</p>
                
                <ol style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Verify your EmailJS account is connected to your Gmail</li>
                    <li>Test the email template in EmailJS dashboard</li>
                    <li>Make sure your domain is verified in EmailJS</li>
                    <li>Test with a real email address you have access to</li>
                </ol>
                
                <button class="btn" onclick="alert('In a real implementation, this would test your EmailJS configuration')">
                    <i class="fas fa-paper-plane"></i> Test Email Configuration
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>Pocket Lawyer &copy; 2023. Email configuration helper.</p>
        </div>
    </div>

    <script>
        // This is a simplified version of what your fixed code should do
        function sendEmail(to, subject, body) {
            // In your actual code, this would use EmailJS
            console.log(`Sending email to: ${to}`);
            console.log(`Subject: ${subject}`);
            console.log(`Body: ${body}`);
            
            // This is how you would initialize EmailJS with your credentials
            const emailjsConfig = {
                serviceId: 'service_5gx2n3s',
                templateId: 'template_91aw6md',
                publicKey: 'RqdmFu2p30HPoaqCw'
            };
            
            // Remember to initialize EmailJS with your public key
            // emailjs.init(emailjsConfig.publicKey);
        }
        
        // This is how the fixed handlePasswordReset function should work
        function handlePasswordReset(userEmail) {
            const adminEmail = "pocketlawyerindia1950@gmail.com";
            const resetToken = "generated_reset_token";
            const resetLink = `https://mypocketlawyer.top/reset-password?token=${resetToken}`;
            
            // Send reset email to USER (not admin)
            const userMessage = `You requested a password reset. Click here: ${resetLink}`;
            sendEmail(userEmail, "Password Reset Request", userMessage);
            
            // Send notification to ADMIN
            const adminMessage = `User ${userEmail} requested a password reset.`;
            sendEmail(adminEmail, "Password Reset Requested", adminMessage);
        }
    </script>
</body>
</html>
